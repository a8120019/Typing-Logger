<!DOCTYPE html>

<html>

<head>
	<link rel="stylesheet" href="index.css">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

	<script type="text/javascript" src="lib/jquery.min.js"></script>
	<script type="text/javascript" src="lib/osql.js"></script>

	<script>
		osql.requireLogin();

		$(document).ready(function () {
			getUserData();
		});

		async function getUserData() {
			var me = await osql.getMe();
			// UserData
			// fname: "Takahiro"
			// id: "a8120019@gsuite.si.aoyama.ac.jp"
			// ip: "210.137.33.94"
			// lname: "Ishikawa"
			// studentid: "18120019"
			var sql = `insert ignore into Users (id, fname, lname, studentid) values ("${me.id}", "${me.fname}", "${me.lname}", ${me.studentid});`;
			await osql.connect(sql);
			document.getElementById('name').innerHTML = me.fname + " " + me.lname;
		}

	</script>

</head>

<body>
	<h1>トップページ</h1>
	<p>ようこそ<span id="name">xx</span>さん</p>
	<hr>
	<ul>
		<li><a href="typing.html">タイピング</a></li>
	</ul>
	<hr>
	<a href="javascript:void(0)" onclick="osql.logout()">ログアウト</a>

</body>

</html>